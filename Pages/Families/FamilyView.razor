@page "/FamilyView"
@using h1.Data.Impl
@using global::Models
@using h1.Data

@inject IJSRuntime jsRuntime
@inject IFamilyService FamilyServiceImpl
@inject NavigationManager NavigationManager

<h3>FamilyView</h3>
<button @onclick='AddFamily'>Add</button>
@foreach (Family family in FamilyServiceImpl.GetFamilies())
{
    if (!family.IsEmpty())
    {
        <div style="border:1px solid gainsboro">
            @family.ShowAddress()
            <a href="/family/@family.Id/edit">Edit</a>
            <a href="/family/@family.Id/delete">Delete</a>
        </div>
    }
}

@code {

    protected override async Task OnInitializedAsync()
    {
        await FamilyServiceImpl.DBSync();
    }

    private void AddFamily()
    {
        Family emptyFamily = FamilyServiceImpl.CreateFamily();
        NavigationManager.NavigateTo($"/family/{emptyFamily.Id}/edit");
    }

}